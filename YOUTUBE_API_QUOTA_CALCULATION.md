# YouTube API 할당량 계산 (100개 영상 조회)

## 현재 코드 기준 계산

### 검색어별 100개 영상 조회 시

#### 1. 검색 API (`search.list`)
- **할당량**: 100 units (페이지당)
- **페이지당 결과**: 최대 50개
- **100개 필요 시**: 2페이지 필요
- **소모량**: 100 units × 2페이지 = **200 units**

#### 2. 비디오 상세 정보 API (`videos.list`)
- **할당량**: 1 unit (50개씩 배치)
- **100개 처리**: 50개씩 2배치
- **소모량**: 1 unit × 2배치 = **2 units**

#### 3. 채널 정보 API (`channels.list`)
- **할당량**: 1 unit (50개씩 배치)
- **중복 제거**: 같은 채널은 한 번만 호출
- **100개 영상의 고유 채널 수**: 
  - 최악의 경우: 100개 모두 다른 채널 = 2배치 = **2 units**
  - 일반적인 경우: 약 50-80개 고유 채널 = 1-2배치 = **1-2 units**
  - 최선의 경우: 같은 채널 영상들 = 1배치 = **1 unit**

### 총 할당량 소모

| 시나리오 | 검색 API | 비디오 상세 | 채널 정보 | **총합** |
|---------|---------|------------|----------|---------|
| **최악의 경우** (모두 다른 채널) | 200 units | 2 units | 2 units | **204 units** |
| **일반적인 경우** (50-80개 채널) | 200 units | 2 units | 1-2 units | **203-204 units** |
| **최선의 경우** (같은 채널) | 200 units | 2 units | 1 unit | **203 units** |

## 결론

**검색어별 100개 영상 조회 시: 약 203-204 units 소모**

- 검색 API가 **98% 이상** 차지 (200 units)
- 비디오 상세와 채널 정보는 합쳐서 **2-4 units** (2% 미만)

## 최적화 효과

### 캐시 사용 시
- **할당량 소모: 0 units** ✅
- Supabase 캐시에서 데이터 로드

### 부분 캐시 사용 시
- 예: 50개는 캐시, 50개는 새로 검색
- 검색 API: 100 units × 1페이지 = **100 units**
- 비디오 상세: 1 unit × 1배치 = **1 unit**
- 채널 정보: 1 unit × 1배치 = **1 unit**
- **총: 102 units** (50% 절약)

## 일일 할당량 기준

- **기본 할당량**: 10,000 units/일
- **100개 영상 검색**: 약 204 units
- **하루 최대 검색 가능 횟수**: 약 49회 (10,000 ÷ 204)

**중요**: 캐시를 활용하면 할당량 소모 없이 무제한 검색 가능!

