# ğŸ¬ Jim's YouTube Searcher - ì™„ì „ ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨

1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [ì•„í‚¤í…ì²˜](#ì•„í‚¤í…ì²˜)
3. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
4. [ì„¤ì • ê°€ì´ë“œ](#ì„¤ì •-ê°€ì´ë“œ)
5. [ë°°í¬ ê°€ì´ë“œ](#ë°°í¬-ê°€ì´ë“œ)
6. [ì½”ë“œ êµ¬ì¡°](#ì½”ë“œ-êµ¬ì¡°)
7. [API Quota ê´€ë¦¬](#api-quota-ê´€ë¦¬)
8. [ë¬¸ì œ í•´ê²°](#ë¬¸ì œ-í•´ê²°)

---

## ì‹œìŠ¤í…œ ê°œìš”

**Jim's YouTube Searcher v.02 supa-cache**ëŠ” YouTube ì˜ìƒì„ ê²€ìƒ‰í•˜ê³  ì¡°íšŒìˆ˜ ë³€í™”ë¥¼ ì¶”ì í•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

### ì£¼ìš” ê¸°ëŠ¥

- âœ… **3ë‹¨ê³„ ìºì‹±**: localStorage â†’ Supabase â†’ YouTube API
- âœ… **ìë™ VPH ì¶”ì **: 1ì‹œê°„ë§ˆë‹¤ ì¡°íšŒìˆ˜ ìŠ¤ëƒ…ìƒ· ì €ì¥
- âœ… **72ì‹œê°„ ìºì‹œ**: ê²€ìƒ‰ ê²°ê³¼ ìë™ ê°±ì‹ 
- âœ… **Supabase ì¸ì¦**: ì‚¬ìš©ì ë¡œê·¸ì¸/íšŒì›ê°€ì…
- âœ… **ë‹¤êµ­ì–´ ì§€ì›**: í•œêµ­ì–´/ì˜ì–´

### ì„±ëŠ¥ ì§€í‘œ

- **API í˜¸ì¶œ ê°ì†Œ**: 95% ì ˆê° (ìºì‹± ì „ëµ)
- **ê²€ìƒ‰ ì†ë„**: ë¡œì»¬ ìºì‹œ ì‹œ 0ms, Supabase ìºì‹œ ì‹œ ~100ms
- **Quota íš¨ìœ¨**: 100ê°œ ê²€ìƒ‰ì–´ ê¸°ì¤€ í•˜ë£¨ ~24 units (VPH ì¶”ì )

---

## ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Vercel (CDN)  â”‚ â† ì •ì  íŒŒì¼ í˜¸ìŠ¤íŒ…
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â†’ Supabase (PostgreSQL)
         â”‚   â”œâ”€ search_cache (ê²€ìƒ‰ ê²°ê³¼)
         â”‚   â”œâ”€ videos (ì˜ìƒ ì •ë³´)
         â”‚   â”œâ”€ view_history (ì¡°íšŒìˆ˜ ìŠ¤ëƒ…ìƒ·)
         â”‚   â”œâ”€ view_tracking_config (ì¶”ì  ì„¤ì •)
         â”‚   â””â”€ users (ì‚¬ìš©ì ì •ë³´)
         â”‚
         â””â”€â†’ YouTube Data API v3
             â””â”€ ê²€ìƒ‰/ì¡°íšŒìˆ˜ ì¡°íšŒ
```

### ìºì‹± ì „ëµ

```
ì‚¬ìš©ì ê²€ìƒ‰
    â†“
1ï¸âƒ£ localStorage í™•ì¸ (0ms)
    â”œâ”€ âœ… ìˆìŒ â†’ ì¦‰ì‹œ í‘œì‹œ
    â””â”€ âŒ ì—†ìŒ
        â†“
2ï¸âƒ£ Supabase ìºì‹œ í™•ì¸ (~100ms)
    â”œâ”€ âœ… ìˆìŒ â†’ í‘œì‹œ + localStorage ì €ì¥
    â””â”€ âŒ ì—†ìŒ
        â†“
3ï¸âƒ£ YouTube API í˜¸ì¶œ (~1-2s)
    â””â”€ ì €ì¥: Supabase + localStorage
```

### ë°ì´í„° íë¦„

1. **ê²€ìƒ‰ íë¦„**
   - ê²€ìƒ‰ì–´ ì…ë ¥ â†’ ìºì‹œ í™•ì¸ â†’ API í˜¸ì¶œ (í•„ìš”ì‹œ) â†’ ê²°ê³¼ í‘œì‹œ

2. **VPH ì¶”ì  íë¦„**
   - 1ì‹œê°„ë§ˆë‹¤ `view_tracking_config.video_ids`ì˜ ì˜ìƒ ì¡°íšŒìˆ˜ ì¡°íšŒ
   - `view_history` í…Œì´ë¸”ì— ìŠ¤ëƒ…ìƒ· ì €ì¥
   - UIì—ì„œ ìµœê·¼ 2ê°œ ìŠ¤ëƒ…ìƒ·ìœ¼ë¡œ VPH ê³„ì‚°

---

## ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **HTML5/CSS3**: ë°˜ì‘í˜• ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ
- **Vanilla JavaScript (ES6+)**: ëª¨ë“ˆ ê¸°ë°˜ êµ¬ì¡°
- **Supabase JS Client**: ë°ì´í„°ë² ì´ìŠ¤/ì¸ì¦

### Backend
- **Supabase (PostgreSQL)**: ë°ì´í„°ë² ì´ìŠ¤
- **Supabase Auth**: ì‚¬ìš©ì ì¸ì¦
- **Supabase Edge Functions** (ì„ íƒ): ìŠ¤ì¼€ì¤„ ì‘ì—…

### Infrastructure
- **Vercel**: ì •ì  ì‚¬ì´íŠ¸ í˜¸ìŠ¤íŒ…
- **GitHub**: ë²„ì „ ê´€ë¦¬

### External APIs
- **YouTube Data API v3**: ì˜ìƒ ê²€ìƒ‰/ì¡°íšŒìˆ˜ ì¡°íšŒ

---

## ì„¤ì • ê°€ì´ë“œ

### 1. Supabase í”„ë¡œì íŠ¸ ìƒì„±

1. [Supabase Dashboard](https://supabase.com/dashboard) ì ‘ì†
2. **New Project** í´ë¦­
3. í”„ë¡œì íŠ¸ ì •ë³´ ì…ë ¥:
   - **Name**: `jims-youtube-searcher`
   - **Database Password**: ì•ˆì „í•œ ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
   - **Region**: ê°€ì¥ ê°€ê¹Œìš´ ë¦¬ì „ ì„ íƒ

### 2. Supabase ì„¤ì • ì •ë³´ ì…ë ¥

**Supabase Dashboard** â†’ **Settings** â†’ **API**ì—ì„œ:

1. **Project URL** ë³µì‚¬
2. **anon public** í‚¤ ë³µì‚¬
3. `js/supabase-config.js` íŒŒì¼ ìˆ˜ì •:

```javascript
const supabaseUrl = 'https://YOUR_PROJECT_REF.supabase.co';
const supabaseAnonKey = 'YOUR_ANON_KEY_HERE';
```

### 3. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìƒì„±

1. **Supabase Dashboard** â†’ **SQL Editor**
2. `supabase/schema.sql` íŒŒì¼ ë‚´ìš© ì „ì²´ ë³µì‚¬
3. SQL Editorì— ë¶™ì—¬ë„£ê¸° í›„ **Run** í´ë¦­

**ì£¼ìš” í…Œì´ë¸”:**
- `search_cache`: ê²€ìƒ‰ ê²°ê³¼ ìºì‹œ
- `videos`: ì˜ìƒ ì •ë³´
- `view_history`: ì¡°íšŒìˆ˜ ìŠ¤ëƒ…ìƒ·
- `view_tracking_config`: VPH ì¶”ì  ì„¤ì •
- `users`: ì‚¬ìš©ì ì •ë³´
- `config`: API í‚¤ ë“± ì„¤ì •

### 4. RLS (Row Level Security) ì„¤ì •

**ì¤‘ìš”**: `videos`ì™€ `search_cache` í…Œì´ë¸”ì€ RLSë¥¼ ë¹„í™œì„±í™”í•´ì•¼ í•©ë‹ˆë‹¤.

1. **Supabase Dashboard** â†’ **Table Editor** â†’ `videos` í…Œì´ë¸”
2. **RLS disabled** ë²„íŠ¼ í´ë¦­ (RLS ë¹„í™œì„±í™”)
3. `search_cache` í…Œì´ë¸”ë„ ë™ì¼í•˜ê²Œ ì²˜ë¦¬

### 5. YouTube API í‚¤ ì €ì¥

**Supabase Dashboard** â†’ **Table Editor** â†’ `config` í…Œì´ë¸”:

1. **Insert row** í´ë¦­
2. ë‹¤ìŒ ê°’ ì…ë ¥:
   - **key**: `apiKeys`
   - **value**: 
   ```json
   {
     "youtube": "YOUR_YOUTUBE_API_KEY_HERE"
   }
   ```
3. **Save** í´ë¦­

### 6. YouTube API í‚¤ ë°œê¸‰

1. [Google Cloud Console](https://console.cloud.google.com/apis/credentials) ì ‘ì†
2. í”„ë¡œì íŠ¸ ìƒì„± ë˜ëŠ” ì„ íƒ
3. **APIs & Services** â†’ **Credentials** â†’ **Create Credentials** â†’ **API Key**
4. **YouTube Data API v3** í™œì„±í™”
5. API í‚¤ ë³µì‚¬í•˜ì—¬ ìœ„ 5ë‹¨ê³„ì— ì €ì¥

---

## ë°°í¬ ê°€ì´ë“œ

### Vercel ë°°í¬

1. **GitHubì— ì½”ë“œ í‘¸ì‹œ**
   ```bash
   git add .
   git commit -m "Initial commit"
   git push origin main
   ```

2. **Vercel ì—°ê²°**
   - [Vercel Dashboard](https://vercel.com/dashboard) ì ‘ì†
   - **Add New Project** í´ë¦­
   - GitHub ì €ì¥ì†Œ ì„ íƒ
   - **Deploy** í´ë¦­

3. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •** (ì„ íƒ)
   - Vercel Dashboard â†’ Project Settings â†’ Environment Variables
   - í•„ìš”ì‹œ í™˜ê²½ ë³€ìˆ˜ ì¶”ê°€

### ë¡œì»¬ ê°œë°œ

1. **ì €ì¥ì†Œ í´ë¡ **
   ```bash
   git clone https://github.com/YOUR_USERNAME/Youtube-Searcher.git
   cd Youtube-Searcher
   ```

2. **ë¡œì»¬ ì„œë²„ ì‹¤í–‰**
   ```bash
   # VS Code Live Server ì‚¬ìš©
   # ë˜ëŠ”
   python -m http.server 8000
   # ë˜ëŠ”
   npx http-server
   ```

3. **ë¸Œë¼ìš°ì €ì—ì„œ ì—´ê¸°**
   - `http://localhost:8000` ì ‘ì†

---

## ì½”ë“œ êµ¬ì¡°

### íŒŒì¼ êµ¬ì¡°

```
Youtube-Searcher/
â”œâ”€â”€ index.html              # ë©”ì¸ HTML
â”œâ”€â”€ css/
â”‚   â””â”€â”€ styles.css          # ëª¨ë“  ìŠ¤íƒ€ì¼
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ main.js             # ì•± ì´ˆê¸°í™”
â”‚   â”œâ”€â”€ ui.js               # UI ë Œë”ë§ & ê²€ìƒ‰ ë¡œì§
â”‚   â”œâ”€â”€ api.js              # YouTube API í˜¸ì¶œ
â”‚   â”œâ”€â”€ supabase-api.js     # Supabase ìºì‹±
â”‚   â”œâ”€â”€ supabase-config.js  # Supabase ì„¤ì •
â”‚   â”œâ”€â”€ auth.js             # ì¸ì¦ ì²˜ë¦¬
â”‚   â”œâ”€â”€ i18n.js             # ë‹¤êµ­ì–´ ì§€ì›
â”‚   â””â”€â”€ view-history.js     # VPH ì¶”ì 
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ schema.sql          # ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
â”‚   â””â”€â”€ fix-schema.sql      # ìŠ¤í‚¤ë§ˆ ìˆ˜ì • ìŠ¤í¬ë¦½íŠ¸
â””â”€â”€ README.md               # í”„ë¡œì íŠ¸ ì†Œê°œ
```

### ì£¼ìš” í•¨ìˆ˜

#### `js/main.js`
- `initializeApp()`: ì•± ì´ˆê¸°í™” (API í‚¤, ì¸ì¦, UI, VPH ì¶”ì )

#### `js/ui.js`
- `search()`: ê²€ìƒ‰ ì‹¤í–‰ (ìºì‹œ ìš°ì„  í™•ì¸)
- `renderPage()`: í˜ì´ì§€ ë Œë”ë§
- `viewVelocityPerDay()`: ì¼ê°„ ì†ë„ ê³„ì‚° (ì¡°íšŒìˆ˜ Ã· ê²½ê³¼ì¼)

#### `js/supabase-api.js`
- `loadFromSupabase()`: Supabase ìºì‹œ ë¡œë“œ
- `saveToSupabase()`: Supabaseì— ì €ì¥
- `trackVideoIdsForViewHistory()`: VPH ì¶”ì ìš© video ID ë“±ë¡

#### `js/view-history.js`
- `initializeViewTrackingFallback()`: ë¸Œë¼ìš°ì € í´ë°± VPH ì¶”ì  ì‹œì‘
- `captureViewsForIds()`: ì¡°íšŒìˆ˜ ìŠ¤ëƒ…ìƒ· ì €ì¥

---

## API Quota ê´€ë¦¬

### Quota ì†Œëª¨ëŸ‰

#### ê²€ìƒ‰ (ì´ˆê¸° ë¡œë“œ)
- `search.list`: 100 units/ê²€ìƒ‰ì–´
- `videos.list`: 1 unit/ìš”ì²­ (50ê°œì”© ë¬¶ìŒ)
- `channels.list`: 1 unit/ìš”ì²­ (50ê°œì”© ë¬¶ìŒ)

**ì˜ˆì‹œ (10ê°œ ì˜ìƒ ê²€ìƒ‰):**
- ê²€ìƒ‰: 100 units
- ë¹„ë””ì˜¤ ìƒì„¸: 1 unit
- ì±„ë„ ì •ë³´: 1 unit
- **ì´ê³„: 102 units/ê²€ìƒ‰ì–´**

#### VPH ì¶”ì  (1ì‹œê°„ë§ˆë‹¤)
- `videos.list` (part='statistics'): 1 unit/ìš”ì²­ (50ê°œì”© ë¬¶ìŒ)

**ì˜ˆì‹œ (100ê°œ ì˜ìƒ ì¶”ì ):**
- 100ê°œ Ã· 50 = 2 requests
- 1ì‹œê°„ë‹¹: 2 units
- í•˜ë£¨(24ì‹œê°„): 48 units

### ìºì‹± íš¨ê³¼

**100ê°œ ê²€ìƒ‰ì–´ ê¸°ì¤€:**

| ì‹œë‚˜ë¦¬ì˜¤ | Quota ì†Œëª¨ëŸ‰ |
|---------|-------------|
| ë§¤ì¼ ê²€ìƒ‰ (ìºì‹œ ì—†ìŒ) | 10,200 units/ì¼ |
| 72ì‹œê°„ ìºì‹œ ì‚¬ìš© | 10,200 units/3ì¼ = 3,400 units/ì¼ |
| **ì ˆê° íš¨ê³¼** | **67% ì ˆê°** |

### ê¶Œì¥ ì„¤ì •

1. **ê²€ìƒ‰ì–´ ë°°ì¹˜ ë¡œë“œ**: 100ê°œë¥¼ 2-3ì¼ë¡œ ë‚˜ëˆ  ë¡œë“œ
2. **VPH ì¶”ì  ì£¼ê¸°**: 1ì‹œê°„ (í•„ìš”ì‹œ 2-3ì‹œê°„ìœ¼ë¡œ ì¡°ì • ê°€ëŠ¥)
3. **ìºì‹œ TTL**: 72ì‹œê°„ ìœ ì§€

---

## ë¬¸ì œ í•´ê²°

### 1. Supabase ì—°ê²° ì˜¤ë¥˜

**ì¦ìƒ**: `Supabase initialized` ë©”ì‹œì§€ê°€ ì•ˆ ë³´ì„

**í•´ê²°**:
- `js/supabase-config.js`ì˜ URLê³¼ í‚¤ í™•ì¸
- ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ í™•ì¸
- Supabase Dashboardì—ì„œ í”„ë¡œì íŠ¸ ìƒíƒœ í™•ì¸

### 2. ê²€ìƒ‰ ê²°ê³¼ê°€ ì €ì¥ë˜ì§€ ì•ŠìŒ

**ì¦ìƒ**: Supabase `search_cache` í…Œì´ë¸”ì´ ë¹„ì–´ìˆìŒ

**í•´ê²°**:
- RLS ì •ì±… í™•ì¸ (ë¹„í™œì„±í™” ê¶Œì¥)
- `search_cache` í…Œì´ë¸” ìŠ¤í‚¤ë§ˆ í™•ì¸
- ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ì €ì¥ ì˜¤ë¥˜ í™•ì¸

### 3. VPH ë°ì´í„°ê°€ í‘œì‹œë˜ì§€ ì•ŠìŒ

**ì¦ìƒ**: "ìµœê·¼ VPH ë°ì´í„° ì—†ìŒ" ë©”ì‹œì§€

**í•´ê²°**:
- `view_history` í…Œì´ë¸”ì— ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸
- ìµœì†Œ 2ê°œ ìŠ¤ëƒ…ìƒ·ì´ í•„ìš” (1ì‹œê°„ ê°„ê²©)
- `view_tracking_config.video_ids`ì— ì˜ìƒ IDê°€ ë“±ë¡ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸

### 4. API Quota ì´ˆê³¼

**ì¦ìƒ**: YouTube API í˜¸ì¶œ ì‹¤íŒ¨

**í•´ê²°**:
- Google Cloud Consoleì—ì„œ í• ë‹¹ëŸ‰ í™•ì¸
- ìºì‹œ í™œìš© (72ì‹œê°„ ë‚´ ì¬ê²€ìƒ‰ì€ API í˜¸ì¶œ ì—†ìŒ)
- ê²€ìƒ‰ì–´ë¥¼ ì—¬ëŸ¬ ë‚ ì— ë‚˜ëˆ  ë¡œë“œ

### 5. ë¡œì»¬ ìºì‹œê°€ ì‘ë™í•˜ì§€ ì•ŠìŒ

**ì¦ìƒ**: localStorageì— ë°ì´í„°ê°€ ì €ì¥ë˜ì§€ ì•ŠìŒ

**í•´ê²°**:
- ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ â†’ Application â†’ Local Storage í™•ì¸
- localStorage ìš©ëŸ‰ ì´ˆê³¼ ì—¬ë¶€ í™•ì¸ (ì•½ 5-10MB ì œí•œ)
- ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ì €ì¥ ì˜¤ë¥˜ í™•ì¸

---

## ì¶”ê°€ ë¦¬ì†ŒìŠ¤

### ë¬¸ì„œ
- `API_OPTIMIZATION.md`: ìºì‹± ì „ëµ ìƒì„¸ ì„¤ëª…
- `SUPABASE_SETUP.md`: Supabase ì„¤ì • ê°€ì´ë“œ
- `README.md`: í”„ë¡œì íŠ¸ ì†Œê°œ

### ìŠ¤í‚¤ë§ˆ
- `supabase/schema.sql`: ì „ì²´ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
- `supabase/fix-schema.sql`: ìŠ¤í‚¤ë§ˆ ìˆ˜ì • ìŠ¤í¬ë¦½íŠ¸

---

## ë²„ì „ ì •ë³´

- **í˜„ì¬ ë²„ì „**: v.02 supa-cache
- **ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-11-25
- **ì£¼ìš” ë³€ê²½ì‚¬í•­**:
  - Supabase ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ
  - 3ë‹¨ê³„ ìºì‹± ì‹œìŠ¤í…œ êµ¬í˜„
  - ìë™ VPH ì¶”ì  ê¸°ëŠ¥ ì¶”ê°€
  - Vercel ë°°í¬ ì„¤ì •

---

## ë¼ì´ì„ ìŠ¤

MIT License - ê°œì¸ ë˜ëŠ” ìƒì—…ì  ëª©ì ìœ¼ë¡œ ììœ ë¡­ê²Œ ì‚¬ìš© ê°€ëŠ¥

---

## ì‘ì„±ì

**JIMPARK80**
- GitHub: [@JIMPARK80](https://github.com/JIMPARK80)

---

## ì°¸ê³ ì‚¬í•­

ì´ ë¬¸ì„œëŠ” í”„ë¡œì íŠ¸ë¥¼ ì²˜ìŒë¶€í„° ë‹¤ì‹œ êµ¬ì¶•í•  ìˆ˜ ìˆë„ë¡ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ê° ë‹¨ê³„ë¥¼ ìˆœì„œëŒ€ë¡œ ë”°ë¼í•˜ë©´ ë™ì¼í•œ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**ì¤‘ìš”**: 
- Supabase RLS ì„¤ì •ì€ í”„ë¡œì íŠ¸ ìš”êµ¬ì‚¬í•­ì— ë”°ë¼ ì¡°ì •í•˜ì„¸ìš”
- API QuotaëŠ” ì‚¬ìš©ëŸ‰ì— ë”°ë¼ Google Cloud Consoleì—ì„œ í™•ì¥ ìš”ì²­ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
- VPH ì¶”ì ì€ ë¸Œë¼ìš°ì € í´ë°± ë°©ì‹ìœ¼ë¡œ ì‘ë™í•˜ë¯€ë¡œ, í˜ì´ì§€ê°€ ì—´ë ¤ìˆì–´ì•¼ í•©ë‹ˆë‹¤ (ì„ íƒ: Supabase Edge Functions ì‚¬ìš©)

