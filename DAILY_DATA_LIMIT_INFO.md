# 📊 하루 데이터 확보 제한 정보

## 현재 설정

### 키워드당 하루 최대 추가 데이터: **20개**

**설정 위치**: `js/ui.js`
```javascript
const DAILY_LOAD_MORE_LIMIT = 20; // 키워드당 하루 최대 추가 로드 20개
const LOAD_MORE_INCREMENT = 50; // 추가 로드 시 50개씩 (API 효율성 고려)
```

**전체 가능량**:
- 키워드 100개 기준: 20개 × 100 = **2,000개/일**
- 이론적 최대: 약 2,574개/일

## 제한 설정 이유

### API 할당량 고려

**YouTube API 기본 할당량**: 10,000 units/일

**현재 사용량**:
1. **VPH 업데이트** (자동, 1시간마다):
   - 10,000개 비디오 기준: 200회 API 호출/실행
   - 하루: 200 × 24시간 = **4,800 units**

2. **데이터 확보** (수동, "데이터 더 확보" 버튼):
   - 50개당: search.list(100) + videos.list(1) = **101 units**
   - 키워드당 하루 최대 20개
   - 키워드 100개 기준: 20 × 100 = 2,000개 = **4,040 units**

**총 사용량**: 4,800 + 4,040 = **8,840 units/일** (88.4%)

### 안전 마진

- **사용 가능**: 10,000 - 4,800 = **5,200 units** (52% 여유)
- **신규 영상 데이터 확보 가능**: 5,200 / 101 × 50 ≈ **2,574개** (이론적 최대)
- **키워드 100개 기준**: 2,574 / 100 ≈ 25.74개/키워드
- **안전 마진 고려**: **키워드당 20개**로 설정
- **실제 안전 마진**: 10,000 - 8,840 = **1,160 units** (11.6%)
- **추가 여유**: 트렌딩 비디오 업데이트, 일반 검색 등에 사용 가능

## 사용 방법

1. **검색 실행**: 키워드로 검색 (예: "인생사연")
2. **"데이터 더 확보" 버튼 클릭**: 추가 50개씩 가져오기
3. **자동 저장**: `videos` 테이블과 `view_tracking_config.video_ids`에 자동 추가

## 제한 확인

### 하루 제한 확인
- 버튼에 남은 개수 표시: `데이터 더 확보 (+20개) (하루 남은: 0개)` (키워드당 20개 제한)
- 제한 도달 시: `하루 제한 도달 (키워드당 20개/일)`

### 키워드당 최대 제한
- 키워드당 최대: **1,000개**
- 제한 도달 시: `최대 제한 도달 (1000개)`

## 조정 방법

### 하루 제한 변경

`js/ui.js` 파일에서 수정:
```javascript
const DAILY_LOAD_MORE_LIMIT = 20; // 키워드당 하루 최대 추가 로드 개수
// 참고: VPH 업데이트(4,800 units)를 제외한 할당량 기준으로 계산
// 키워드 100개 기준: 20 × 100 = 2,000개/일
```

### 한 번에 가져오는 개수 변경

```javascript
const LOAD_MORE_INCREMENT = 50; // 원하는 값으로 변경
```

## 권장 설정

### 현재 설정 (권장)
- **키워드당 하루 최대**: 20개
- **한 번에**: 50개 (하지만 키워드당 20개 제한으로 실제로는 20개만)
- **전체 가능량**: 키워드 100개 기준 약 2,000개/일
- **API 사용량**: 4,800 (VPH) + 4,040 (데이터 확보) = 8,840 units/일
- **이유**: 키워드당 균등 분배, VPH 업데이트 할당량 고려, 안전 마진 확보

### 보수적인 설정
- **하루 최대**: 1,500개 (API 사용량: 4,800 + 3,030 = 7,830 units)
- **이유**: 더 많은 안전 마진 확보 (2,170 units)

### 최대 활용 설정
- **하루 최대**: 2,500개 (API 사용량: 4,800 + 5,050 = 9,850 units)
- **주의**: 안전 마진이 매우 작음 (150 units)

## 참고사항

- **키워드별 제한**: 각 키워드마다 독립적으로 하루 20개 제한
- **전체 가능량**: 키워드 100개 기준 약 2,000개/일
- **자동 리셋**: 매일 토론토 시간 기준 자정에 리셋
- **VPH 자동 추가**: 가져온 영상은 자동으로 `view_tracking_config.video_ids`에 추가되어 VPH 추적 시작

