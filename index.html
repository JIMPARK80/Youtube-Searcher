<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jim's YouTube 채널 v.02 supa-cache</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Language Toggle Button -->
    <button id="languageToggle" class="language-toggle-btn">🇰🇷 한국어</button>
    
    <!-- Auth Section -->
    <div class="auth-section" id="authSection">
        <button class="auth-btn login-btn" id="loginBtn" data-i18n="auth.login">로그인</button>
        <button class="auth-btn signup-btn" id="signupBtn" data-i18n="auth.signup">가입하기</button>
        <div class="user-info" id="userInfo" style="display: none;">
            <img id="userAvatar" class="user-avatar" src="" alt="User Avatar">
            <span class="user-name" id="userName" style="cursor: pointer;" title="클릭하여 프로필 수정" data-i18n-title="auth.profileClickToEdit"></span>
            <button class="logout-btn" id="logoutBtn" data-i18n="auth.logout">로그아웃</button>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="signup-modal" id="loginModal">
        <form class="signup-form" onsubmit="return false;">
            <button class="close-modal" id="closeLoginModal">&times;</button>
            <h2 data-i18n="auth.login">로그인</h2>
            <div class="form-group">
                <label for="loginEmail" data-i18n="auth.email">이메일</label>
                <input type="email" id="loginEmail" placeholder="이메일을 입력하세요" data-i18n="auth.emailPlaceholder" autocomplete="username">
            </div>
            <div class="form-group">
                <label for="loginPassword" data-i18n="auth.password">비밀번호</label>
                <div class="password-wrapper">
                    <input type="password" id="loginPassword" placeholder="비밀번호를 입력하세요" data-i18n="auth.passwordPlaceholder" autocomplete="current-password">
                    <button type="button" class="password-toggle" onclick="togglePassword('loginPassword', 'loginPasswordToggle')">
                        <span id="loginPasswordToggle" data-i18n="auth.show">보기</span>
                    </button>
                </div>
            </div>
            <div class="form-buttons">
                <button class="submit-btn" id="submitLogin" data-i18n="auth.login">로그인</button>
                <button class="cancel-btn" id="cancelLogin" data-i18n="auth.cancel">취소</button>
            </div>
        </form>
    </div>

    <!-- Signup Modal -->
    <div class="signup-modal" id="signupModal">
        <form class="signup-form" onsubmit="return false;">
            <button class="close-modal" id="closeModal">&times;</button>
            <h2 data-i18n="auth.signup">회원 가입</h2>
            <div class="form-group">
                <label for="signupUsername" data-i18n="auth.username">아이디</label>
                <input type="text" id="signupUsername" placeholder="아이디를 입력하세요" data-i18n="auth.usernamePlaceholder">
            </div>
            <div class="form-group">
                <label for="signupId" data-i18n="auth.email">이메일</label>
                <input type="email" id="signupId" placeholder="이메일을 입력하세요" data-i18n="auth.emailPlaceholder" autocomplete="username">
            </div>
            <div class="form-group">
                <label for="signupPassword" data-i18n="auth.password">비밀번호</label>
                <div class="password-wrapper">
                    <input type="password" id="signupPassword" placeholder="비밀번호를 입력하세요" data-i18n="auth.passwordPlaceholder" autocomplete="new-password">
                    <button type="button" class="password-toggle" onclick="togglePassword('signupPassword', 'signupPasswordToggle')">
                        <span id="signupPasswordToggle" data-i18n="auth.show">보기</span>
                    </button>
                </div>
            </div>
            <div class="form-group">
                <label for="signupPasswordConfirm" data-i18n="auth.passwordConfirm">비밀번호 확인</label>
                <div class="password-wrapper">
                    <input type="password" id="signupPasswordConfirm" placeholder="비밀번호를 다시 입력하세요" data-i18n="auth.passwordConfirmPlaceholder" autocomplete="new-password">
                    <button type="button" class="password-toggle" onclick="togglePassword('signupPasswordConfirm', 'signupPasswordConfirmToggle')">
                        <span id="signupPasswordConfirmToggle" data-i18n="auth.show">보기</span>
                    </button>
                </div>
            </div>
            <div class="form-buttons">
                <button class="submit-btn" id="submitSignup" data-i18n="auth.signup">가입하기</button>
                <button class="cancel-btn" id="cancelSignup" data-i18n="auth.cancel">취소</button>
            </div>
        </form>
    </div>

    <!-- Profile Edit Modal -->
    <div class="signup-modal" id="profileEditModal">
        <form class="signup-form" onsubmit="return false;">
            <button class="close-modal" id="closeProfileEditModal">&times;</button>
            <h2 data-i18n="auth.profileEditTitle">프로필 수정</h2>
            <div class="form-group">
                <label for="editUsername" data-i18n="auth.username">아이디</label>
                <input type="text" id="editUsername" placeholder="아이디를 입력하세요" data-i18n="auth.usernamePlaceholder">
            </div>
            <div class="form-group">
                <label for="editEmail" data-i18n="auth.email">이메일</label>
                <input type="email" id="editEmail" placeholder="이메일을 입력하세요" data-i18n="auth.emailPlaceholder" readonly style="background: #f0f0f0;">
            </div>
            <div class="form-buttons">
                <button class="submit-btn" id="submitProfileEdit" data-i18n="auth.profileEdit">수정하기</button>
                <button class="cancel-btn" id="cancelProfileEdit" data-i18n="auth.cancel">취소</button>
            </div>
        </form>
    </div>

    <div class="container">
        <div class="header">
            <h1 data-i18n="app.title">🎬 Jim's YouTube 채널 v.02 supa-cache</h1>
            <p data-i18n="app.subtitle">검색어를 입력하고 다양한 정보를 확인하세요!</p>
        </div>

        <div class="search-box">
            <div class="search-input-group">
                <input type="text" id="searchInput" placeholder="검색어를 입력하세요..." data-i18n="search.placeholder" value="인생사연" />
                <button id="searchBtn" data-i18n="search.button">검색</button>
            </div>
            <!-- API 키는 JavaScript에서 동적으로 생성됨 (보안 향상) -->

            <!-- View Count Filter -->
            <div class="filter-section">
                <details class="filter-group view-filter" open>
                    <summary>
                        <span data-i18n="filter.viewCount">조회수 필터</span>
                        <span class="summary-indicator" aria-hidden="true">›</span>
                    </summary>
                    <div class="filter-options">
                        <label><input type="radio" name="viewCountFilter" value="all" checked> <span data-i18n="filter.all">전체</span></label>
                        <label><input type="radio" name="viewCountFilter" value="0-1000"> <span data-i18n="filter.viewCount.grade5">5등급</span> (&lt;1K)</label>
                        <label><input type="radio" name="viewCountFilter" value="1000-10000"> <span data-i18n="filter.viewCount.grade4">4등급</span> (1K-10K)</label>
                        <label><input type="radio" name="viewCountFilter" value="10000-100000"> <span data-i18n="filter.viewCount.grade3">3등급</span> (10K-100K)</label>
                        <label><input type="radio" name="viewCountFilter" value="100000-1000000"> <span data-i18n="filter.viewCount.grade2">2등급</span> (100K-1M)</label>
                        <label><input type="radio" name="viewCountFilter" value="1000000"> <span data-i18n="filter.viewCount.grade1">1등급</span> (1M+)</label>
                        <label><input type="radio" name="viewCountFilter" value="custom"> <span data-i18n="filter.custom">사용자정의</span></label>
                    </div>
                    <div class="custom-range" id="viewCountCustom">
                        <input type="number" id="viewCountMin" data-i18n-placeholder="filter.viewCount.minPlaceholder" placeholder="최소" min="0"> ~ 
                        <input type="number" id="viewCountMax" data-i18n-placeholder="filter.viewCount.maxPlaceholder" placeholder="최대" min="0">
                    </div>
                </details>
                
                <!-- Subscriber Count Filter -->
                <details class="filter-group sub-filter">
                    <summary>
                        <span data-i18n="filter.subCount">구독자 필터</span>
                        <span class="summary-indicator" aria-hidden="true">›</span>
                    </summary>
                    <div class="filter-options">
                        <label><input type="radio" name="subCountFilter" value="all" checked> <span data-i18n="filter.all">전체</span></label>
                        <label><input type="radio" name="subCountFilter" value="0-1000"> 🐣 <span data-i18n="filter.subCount.rookie">신입</span> (1-1K)</label>
                        <label><input type="radio" name="subCountFilter" value="1000-10000"> 🎬 <span data-i18n="filter.subCount.beginner">초보</span> (1K-10K)</label>
                        <label><input type="radio" name="subCountFilter" value="100000-1000000"> 🥈 <span data-i18n="filter.subCount.silver">실버버튼</span> (100K-1M)</label>
                        <label><input type="radio" name="subCountFilter" value="1000000-10000000"> 🥇 <span data-i18n="filter.subCount.gold">골드버튼</span> (1M-10M)</label>
                        <label><input type="radio" name="subCountFilter" value="10000000"> 💎 <span data-i18n="filter.subCount.diamond">다이아버튼</span> (10M+)</label>
                        <label><input type="radio" name="subCountFilter" value="custom"> <span data-i18n="filter.custom">사용자정의</span></label>
                    </div>
                    <div class="custom-range" id="subCountCustom">
                        <input type="number" id="subCountMin" data-i18n-placeholder="filter.subCount.minPlaceholder" placeholder="최소" min="0"> ~ 
                        <input type="number" id="subCountMax" data-i18n-placeholder="filter.subCount.maxPlaceholder" placeholder="최대" min="0">
                    </div>
                </details>
                 
                 <!-- Upload Date Filter -->
                 <details class="filter-group date-filter">
                     <summary>
                        <span data-i18n="filter.uploadDate">업로드일자 필터</span>
                        <span class="summary-indicator" aria-hidden="true">›</span>
                    </summary>
                     <div class="filter-options">
                         <label><input type="radio" name="uploadDateFilter" value="all" checked> <span data-i18n="filter.all">전체</span></label>
                         <label><input type="radio" name="uploadDateFilter" value="1"> <span data-i18n="filter.date.day1">최근 1일</span></label>
                         <label><input type="radio" name="uploadDateFilter" value="3"> <span data-i18n="filter.date.day3">최근 3일</span></label>
                         <label><input type="radio" name="uploadDateFilter" value="7"> <span data-i18n="filter.date.day7">최근 7일</span></label>
                         <label><input type="radio" name="uploadDateFilter" value="30"> <span data-i18n="filter.date.month1">1개월 이내</span></label>
                         <label><input type="radio" name="uploadDateFilter" value="90"> <span data-i18n="filter.date.month3">3개월 이내</span></label>
                         <label><input type="radio" name="uploadDateFilter" value="180"> <span data-i18n="filter.date.month6">6개월 이내</span></label>
                        <label><input type="radio" name="uploadDateFilter" value="365"> <span data-i18n="filter.date.year1">1년 이내</span></label>
                    </div>
                </details>
                
                <!-- Video Duration Filter -->
                <details class="filter-group duration-filter">
                    <summary>
                        <span data-i18n="filter.duration">영상길이 필터</span>
                        <span class="summary-indicator" aria-hidden="true">›</span>
                    </summary>
                    <div class="filter-options">
                        <label><input type="radio" name="durationFilter" value="all" checked> <span data-i18n="filter.all">전체</span></label>
                        <label><input type="radio" name="durationFilter" value="0-60"> <span data-i18n="filter.duration.shorts">쇼츠구간</span> (&lt;1min)</label>
                        <label><input type="radio" name="durationFilter" value="60-600"> <span data-i18n="filter.duration.short">짧은영상</span> (1-10min)</label>
                        <label><input type="radio" name="durationFilter" value="600-1800"> <span data-i18n="filter.duration.medium">중간영상</span> (10-30min)</label>
                        <label><input type="radio" name="durationFilter" value="1800-3600"> <span data-i18n="filter.duration.long">긴영상</span> (30min-1hr)</label>
                        <label><input type="radio" name="durationFilter" value="3600"> <span data-i18n="filter.duration.verylong">아주긴영상</span> (1hr+)</label>
                        <label><input type="radio" name="durationFilter" value="custom"> <span data-i18n="filter.custom">사용자선택</span></label>
                    </div>
                    <div class="custom-range" id="durationCustom">
                        <input type="number" id="durationMin" data-i18n-placeholder="filter.duration.minPlaceholder" placeholder="최소 (분)" min="0"> ~ 
                        <input type="number" id="durationMax" data-i18n-placeholder="filter.duration.maxPlaceholder" placeholder="최대 (분)" min="0"> <small data-i18n="filter.duration.unit">(분 단위)</small>
                    </div>
                </details>
                
                <!-- Sort and Display Controls -->
                <details class="filter-group sort-filter" open>
                    <summary>
                        <span data-i18n="filter.sort">정렬 및 표시</span>
                        <span class="summary-indicator" aria-hidden="true">›</span>
                    </summary>
                    <div class="filter-options">
                        <div class="sort-control">
                            <label for="sortVpdSelect" data-i18n="sort.vpd">조회수 정렬</label>
                            <select id="sortVpdSelect">
                                <option value="none" data-i18n="sort.vpd.none">기본</option>
                                <option value="desc" selected data-i18n="sort.vpd.desc">높은 순</option>
                                <option value="asc" data-i18n="sort.vpd.asc">낮은 순</option>
                            </select>
                        </div>
                        <div class="sort-control">
                            <label for="velocityMetricSelect" data-i18n="sort.velocityMetric">표시 단위</label>
                            <select id="velocityMetricSelect">
                                <option value="recent-vph" data-i18n="sort.velocityMetric.recentVph">최근 VPH</option>
                                <option value="day" selected data-i18n="sort.velocityMetric.day">일간(VPD)</option>
                                <option value="hour" data-i18n="sort.velocityMetric.hour">시간당(VPH)</option>
                            </select>
                        </div>
                    </div>
                </details>
            </div>

        <div class="result-summary" id="resultSummary">
            <span data-i18n="result.summary">검색 결과</span>: <span id="totalCount">0</span><span data-i18n="result.count">개</span>
        </div>

        <div id="results"></div>
    </div>


    <!-- Supabase SDK -->
    <script type="module" src="js/supabase-config.js"></script>
    
    <!-- Main Application Script -->
    <script type="module" src="js/main.js"></script>

</body>
</html>
